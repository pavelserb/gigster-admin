<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Translations</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #e8f5e8; }
        .error { background: #ffebee; }
    </style>
</head>
<body>
    <h1>Test Translation Logic</h1>
    
    <div id="results"></div>

    <script>
        // Mock CONFIG
        window.CONFIG = {
            updateCategories: {
                tickets: { en: 'Tickets', cs: 'Vstupenky', uk: 'Квитки' },
                announcement: { en: 'News', cs: 'Novinky', uk: 'Новини' },
                logistics: { en: 'Logistics', cs: 'Logistika', uk: 'Логістика' }
            }
        };

        class TestUpdatesManager {
            constructor() {
                this.currentLang = 'en';
            }

            getTranslation(field, fallback = '') {
                console.log('getTranslation called with field:', field, 'fallback:', fallback);
                console.log('currentLang:', this.currentLang);
                
                if (!field) return fallback;
                
                if (typeof field === 'object') {
                    console.log('Field is object, keys:', Object.keys(field));
                    const result = field[this.currentLang] || field.en || fallback;
                    console.log('Translation result:', result);
                    return result;
                }
                
                return field;
            }

            getUpdateTypeTranslation(type) {
                console.log('getUpdateTypeTranslation called for type:', type);
                console.log('window.CONFIG available:', !!window.CONFIG);
                console.log('currentLang:', this.currentLang);
                
                if (window.CONFIG && window.CONFIG.updateCategories && window.CONFIG.updateCategories[type]) {
                    console.log('Found translation config for type:', type);
                    console.log('Translation config:', window.CONFIG.updateCategories[type]);
                    const translation = this.getTranslation(window.CONFIG.updateCategories[type], type);
                    console.log('Final translation:', translation);
                    return translation;
                }
                
                console.log('No translation config found, using fallback:', type);
                return type;
            }

            setLanguage(lang) {
                console.log('setLanguage called with:', lang);
                this.currentLang = lang;
                console.log('New currentLang:', this.currentLang);
            }
        }

        const results = document.getElementById('results');
        
        function addResult(type, message, isSuccess = true) {
            const div = document.createElement('div');
            div.className = `test-result ${isSuccess ? 'success' : 'error'}`;
            div.innerHTML = `<strong>${type}:</strong> ${message}`;
            results.appendChild(div);
        }

        // Test the functionality
        const testManager = new TestUpdatesManager();
        
        // Test English
        testManager.setLanguage('en');
        const enTickets = testManager.getUpdateTypeTranslation('tickets');
        const enNews = testManager.getUpdateTypeTranslation('announcement');
        const enLogistics = testManager.getUpdateTypeTranslation('logistics');
        
        addResult('English', `Tickets: ${enTickets}, News: ${enNews}, Logistics: ${enLogistics}`);
        
        // Test Czech
        testManager.setLanguage('cs');
        const csTickets = testManager.getUpdateTypeTranslation('tickets');
        const csNews = testManager.getUpdateTypeTranslation('announcement');
        const csLogistics = testManager.getUpdateTypeTranslation('logistics');
        
        addResult('Czech', `Tickets: ${csTickets}, News: ${csNews}, Logistics: ${csLogistics}`);
        
        // Test Ukrainian
        testManager.setLanguage('uk');
        const ukTickets = testManager.getUpdateTypeTranslation('tickets');
        const ukNews = testManager.getUpdateTypeTranslation('announcement');
        const ukLogistics = testManager.getUpdateTypeTranslation('logistics');
        
        addResult('Ukrainian', `Tickets: ${ukTickets}, News: ${ukNews}, Logistics: ${ukLogistics}`);
        
        console.log('Test completed!');
    </script>
</body>
</html>
